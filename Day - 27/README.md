# Day 27 – Multi-Tool Agent Orchestration

This project is part of the **#30DaysOfAI** challenge by Streamlit.

## Goal

Build a **chat-based Streamlit interface** to interact with a **pre-created Snowflake Cortex Agent** that can autonomously orchestrate between **Cortex Search** and **Cortex Analyst**.

## What this app does

- Provides a chat UI for querying sales data
- Sends user queries to a **pre-created Cortex Agent**
- Automatically selects the right tool:
  - **Cortex Search** for conversation summaries
  - **Cortex Analyst** for metrics and aggregations
- Displays:
  - Which tool was used
  - The agent’s thinking process
  - Generated SQL (for analyst queries)
  - Automatically executed query results

## Tech Stack

- Python
- Streamlit
- Snowflake Snowpark
- Snowflake Cortex Agents
- Cortex Search
- Cortex Analyst (Text-to-SQL)

## Key Concept: Multi-Tool Agent Orchestration

Instead of manually choosing tools, the agent:

- Interprets the user’s intent
- Decides which tool is best suited
- Executes the task autonomously
- Returns structured results

This enables **natural language interaction** across both:

- Qualitative data (conversation transcripts)
- Quantitative data (sales metrics)

## How it Works

### 1. Pre-Created Agent (Day 26)

The app connects to an agent created earlier with:

- Cortex Search service
- Cortex Analyst semantic model
- Instructions and permissions defined once

Only messages are sent at runtime.

### 2. Chat Interface

Users can:

- Ask free-form questions
- Use curated example questions
- View full chat history

### 3. Real-Time Transparency

For every response, the UI shows:

1. **Tool Used** (Search or Analyst)
2. **Agent Thinking** (why that tool was chosen)
3. **Response Output** (for search queries)
4. **Generated SQL** (for analyst queries)
5. **Auto-executed Results** (rendered as a dataframe)

### 4. Automatic SQL Execution

When the agent uses Cortex Analyst:

- SQL is generated by the agent
- Displayed in the UI
- Executed automatically
- Results shown instantly (no manual button)

## Key Learning

Multi-tool agents unlock powerful AI workflows by combining:

- Reasoning
- Tool selection
- Data access
- Transparent execution

This pattern is highly applicable to **analytics copilots**, **enterprise chatbots**, and **decision-support systems**.

